<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Material Design fonts -->
    <link rel="stylesheet" type="text/css" href="../css/bootstrap/v4/fonts/Roboto.css">
    <link rel="stylesheet" type="text/css" href="../css/bootstrap/v4/fonts/MaterialIcons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../css/bootstrap/v4/bootstrap-material-design.min.css">
    <link rel="stylesheet" type="text/css" href="../css/internal/selection.css">
    <title>About - Lornsenschule Vertretungsplan</title>
  </head>
  <body>
      <div class="bmd-layout-container" id="Main">
      <main class="bmd-layout-content">
        <nav class="navbar navbar-light bg-faded navbar-fixed-top">
          <h3 id="about"  class="navbar-brand">Über</h3>
        </nav>
        <div class="container" style="padding-top: 70px;">
          <!--<header class="bmd-layout-header"><h2 id="about">Über</h2></header>
          <h1 id="about">Über</h1>-->

          <div id="UpdaterStatus">
            <div class="card card-block" style="border-radius: 5px; -webkit-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); -moz-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); position:relative; height: 10%; background-color: #2196F3; color: #fff">
              <div class="row">
                <div class="col-md-4" style="position: relative; margin: 0; display: inline-block;">
                  <img src="../LS.png" alt="Logo" height="70px" width="70px" style="margin: 0; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                </div>
                <div class="col-md-8" style="position: relative; margin: 0; display: inline-block;">
                  <h4>Update check is running</h4>
                  </br>
                  <h7></h7>
                </div>
              </div>
            </div>
          </div>
          <h3>Was kann diese Anwendung?</h3>
          <div style="text-allign: center;"><p>Die Vertretungsplan Anwendung ist ein <a href="https://github.com/MTRNord/ls-vertretungsplan-desktop">Open Source Projekt<a/> für die Lornsenschule basierend auf der Android App von <a href="https://ls.vertretungsplan.me">Johan v. Forster</a>.
          Die Angaben werden mir von der App bereit gestellt.</p></div>
        </div>
      </main>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- Insert this line above script imports  -->
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="../js/jquery-2.2.4.min.js"></script>
    <script src="../js/bootstrap/v4/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
    <script src="../js/bootstrap/v4/bootstrap-material-design.iife.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/bootstrap/v4/ie10-viewport-bug-workaround.js"></script>

    <script>if (window.module) module = window.module;</script>
    <script>
      var electron = require('electron');
      $(document).on('click', 'a[href^="http"]', function(event) {
        event.preventDefault();
        electron.shell.openExternal(this.href);
      });
      console.time('RenderData');
      const {ipcRenderer} = require('electron')
      const Config = require('electron-config');
      const config = new Config();

      //_ = require('lodash');

      function Update() {
        ipcRenderer.send('AutoUpdater')
      }

      logo = '<img src="../LS.png" alt="Logo" height="70px" width="70px" style="margin: 0; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">';
      ipcRenderer.on('Updater' , function(event , data){
        $("div#UpdaterStatus").empty();
        if (data.status == "checking") {
          $("div#UpdaterStatus").append('<div onclick="Update();" class="card card-block" style="border-radius: 5px; -webkit-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); -moz-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); position:relative; height: 10%; background-color: #2196F3; color: #fff"><div class="row"><div class="col-md-4" style="position: relative; margin: 0; display: inline-block;">' + logo + '</div><div class="col-md-8" style="position: relative; margin: 0; display: inline-block;"><h4>Update check is running</h4></br><h7></h7></div></div></div>');
        }
        if (data.status == "error") {
          $("div#UpdaterStatus").append('<div onclick="Update();" class="card card-block" style="border-radius: 5px;  -webkit-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); -moz-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55);  position:relative; height: 10%; background-color: #F44336; color: #fff"><div class="row"><div class="col-md-4" style="position: relative; margin: 0; display: inline-block;">' + logo + '</div><div class="col-md-8" style="position: relative; margin: 0; display: inline-block;"><h4>Update check run into an Error</h4></br><h7></h7></div></div></div>');
        }
        if (data.status == "update") {
          $("div#UpdaterStatus").append('<div onclick="Update();" class="card card-block" style="border-radius: 5px;  -webkit-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); -moz-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55);  position:relative; height: 10%; background-color: #4CAF50; color: #fff"><div class="row"><div class="col-md-4" style="position: relative; margin: 0; display: inline-block;">' + logo + '</div><div class="col-md-8" style="position: relative; margin: 0; display: inline-block;" ><h4>New update available</h4></br><h7></h7></div></div></div>');
        }
        if (data.status == "no-update") {
          $("div#UpdaterStatus").append('<div onclick="Update();" class="card card-block" style="border-radius: 5px;  -webkit-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); -moz-box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55); box-shadow: 6px 6px 22px -6px rgba(0,0,0,0.55);  position:relative; height: 10%; background-color: #F44336; color: #fff"><div class="row"><div class="col-md-4" style="position: relative; margin: 0; display: inline-block;">' + logo + '</div><div class="col-md-8" style="position: relative; margin: 0; display: inline-block;"><h4>No update available</h4></br><h7></h7></div></div></div>');
        }
      });

      //_.find(body.classes, function (key) {})


      console.timeEnd('RenderData');
    </script>
  </body>
</html>
